<?xml version="1.0" encoding="UTF-8"?>
<alfresco-config>
   <config>
      <actions>

         <action id="volume_add_new">
            <evaluator>ee.webmedia.alfresco.volume.web.evaluator.CanAddVolumeEvaluator</evaluator>
            <permissions>
               <permission allow="true">CreateChildren</permission>
            </permissions>
            <label-id>volume_add_new</label-id>
            <image>/images/icons/versioned_properties.gif</image>
            <action-listener>#{VolumeDetailsDialog.addNewVolume}</action-listener>
            <action>dialog:volumeDetailsDialog</action>
            <params>
               <param name="seriesNodeRef">#{VolumeListDialog.parent.node.nodeRef}</param>
            </params>
         </action>

          <action id="volume_archive">
              <evaluator>ee.webmedia.alfresco.volume.web.evaluator.CanArchiveVolumeEvaluator</evaluator>
              <label-id>volume_archive</label-id>
              <image>/images/icons/versioned_properties.gif</image>
              <action-listener>#{VolumeDetailsDialog.archive}</action-listener>
          </action>
         
          <action id="volume_close">
              <evaluator>ee.webmedia.alfresco.volume.web.evaluator.VolumeIsOpenedEvaluator</evaluator>
              <label-id>close</label-id>
              <image>/images/icons/versioned_properties.gif</image>
              <action-listener>#{VolumeDetailsDialog.close}</action-listener>
          </action>
          
          <action id="volume_open">
              <evaluator>ee.webmedia.alfresco.volume.web.evaluator.VolumeIsClosedEvaluator</evaluator>
              <label-id>volume_open</label-id>
              <image>/images/icons/versioned_properties.gif</image>
              <action-listener>#{VolumeDetailsDialog.open}</action-listener>
          </action>
          
         <action-group id="browse_actions_volume">
            <action idref="volume_add_new" />
         </action-group>

          <action-group id="volume_actions">
              <action idref="volume_archive"/>
              <action idref="volume_close"/>
              <action idref="volume_open"/>
          </action-group>

      </actions>
      <dialogs>
         <dialog name="volumeListDialog" page="/WEB-INF/classes/ee/webmedia/alfresco/volume/web/volume-list-dialog.jsp" managed-bean="VolumeListDialog"
            icon="/images/icons/versioned_properties_large.gif" actions-config-id="browse_actions_volume" title-id="volume_list" description-id="volume_list_info" >
         </dialog>

         <dialog name="volumeDetailsDialog" page="/WEB-INF/classes/ee/webmedia/alfresco/volume/web/volume-details-dialog.jsp" managed-bean="VolumeDetailsDialog"
            icon="/images/icons/versioned_properties_large.gif" title-id="volume_details" show-ok-button="true" actions-config-id="volume_actions">
         </dialog>
      </dialogs>
   </config>

   <config evaluator="node-type" condition="vol:volume">
      <property-sheet>
         <show-property name="vol:volumeMark" display-label-id="volume_volumeMark" readOnlyIf="vol:status=suletud||hävitatud" />
         <show-property name="vol:title" display-label-id="volume_title" readOnlyIf="vol:status=suletud||hävitatud" styleClass="expand19-200" component-generator="TextAreaGenerator" />
         <show-property name="vol:volumeType" display-label-id="volume_volumeType" classificatorName="volumeType" component-generator="ClassificatorSelectorGenerator" readOnlyIf="vol:status=suletud||hävitatud" />
         <show-property name="vol:containsCases" display-label-id="volume_containsCases" component-generator="CheckboxGenerator" readOnlyIf="#{VolumeDetailsDialog.disableContainsCases}" />
         <show-property name="vol:description" display-label-id="volume_description" readOnlyIf="vol:status=suletud||hävitatud" styleClass="expand19-200" component-generator="TextAreaGenerator"/>
         <show-property name="vol:validFrom" display-label-id="volume_valid" textId="document_eventDates_templateText"
         component-generator="InlinePropertyGroupGenerator" optionsSeparator="¤" props="
             vol:validFrom¤¤styleClass=date inline¤readOnlyIf=vol:status=suletud||hävitatud
            ,vol:validTo¤¤styleClass=date inline¤readOnlyIf=vol:status=suletud||hävitatud
            "
         />
         <show-property name="vol:status" display-label-id="series_status" read-only="true" classificatorName="docListUnitStatus" component-generator="ClassificatorSelectorGenerator" />
         <show-property name="vol:dispositionDate" display-label-id="volume_dispositionDate" readOnlyIf="vol:status=hävitatud"/>
         <show-property name="vol:archivingNote" display-label-id="volume_archive_note" readOnlyIf="vol:status=hävitatud"/>
         <show-property name="vol:sendToDestruction" display-label-id="volume_sendToDestruction" component-generator="SendToDestructionGenerator"/>
      </property-sheet>
   </config>
</alfresco-config>

