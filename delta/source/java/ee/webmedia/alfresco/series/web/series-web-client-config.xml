<?xml version="1.0" encoding="UTF-8"?>
<alfresco-config>
   <config>
      <actions>

         <action id="series_add_new">
            <permissions>
               <permission allow="true">CreateChildren</permission>
            </permissions>
            <label-id>series_createNew</label-id>
            <image>/images/icons/versioned_properties.gif</image>
            <action-listener>#{SeriesDetailsDialog.addNewSeries}</action-listener>
            <action>dialog:seriesDetailsDialog</action>
            <params>
               <param name="functionNodeRef">#{SeriesListDialog.function.nodeRef}</param>
            </params>
         </action>

         <action id="series_permissions">
            <permissions>
               <permission allow="true">ReadPermissions</permission>
            </permissions>
            <label-id>manage_invited_users</label-id>
            <image>/images/icons/invite.gif</image>
            <action-listener>#{PermissionsListDialog.setup}</action-listener>
            <action>dialog:permissionsListDialog</action>
            <params>
               <param name="nodeRef">#{SeriesDetailsDialog.currentNode.nodeRef}</param>
               <param name="permission">DocumentFileRead</param>
            </params>
         </action>

         <action-group id="browse_actions_series">
            <action idref="series_add_new" />
         </action-group>

         <action-group id="browse_actions_series_details">
            <action idref="series_permissions" />
         </action-group>

      </actions>
      <dialogs>
         <dialog name="seriesListDialog" page="/WEB-INF/classes/ee/webmedia/alfresco/series/web/series-list-dialog.jsp" managed-bean="SeriesListDialog"
            icon="/images/icons/versioned_properties_large.gif" actions-config-id="browse_actions_series" title-id="series_list" description-id="series_list_info" >
         </dialog>

         <dialog name="seriesDetailsDialog" page="/WEB-INF/classes/ee/webmedia/alfresco/series/web/series-details-dialog.jsp" managed-bean="SeriesDetailsDialog"
		    icon="/images/icons/versioned_properties_large.gif" title-id="series_details" show-ok-button="true" >
            <buttons>
               <button id="close-button" label-id="series_close" action="#{SeriesDetailsDialog.close}" disabled="#{SeriesDetailsDialog.closed}" />
            </buttons>
         </dialog>
         
         <dialog name="mySeriesListDialog" page="/WEB-INF/classes/ee/webmedia/alfresco/series/web/mydocuments/myseries-list-dialog.jsp" managed-bean="MySeriesListDialog"
            icon="/images/icons/versioned_properties_large.gif" title-id="series_myseries_list" show-ok-button="false">
         </dialog>
      </dialogs>
   </config>

   <config evaluator="node-type" condition="ser:series">
      <property-sheet>
         <show-property name="ser:type" display-label-id="series_type" classificatorName="seriesType" component-generator="ClassificatorSelectorGenerator"
            readOnlyIf="ser:status=suletud" />
         <show-property name="ser:seriesIdentifier" display-label-id="series_seriesIdentifier" readOnlyIf="ser:status=suletud" />
         <show-property name="ser:title" display-label-id="series_title" readOnlyIf="ser:status=suletud" styleClass="expand19-200" component-generator="TextAreaGenerator" />
         <show-property name="ser:description" display-label-id="series_description" readOnlyIf="ser:status=suletud" styleClass="expand19-200" component-generator="TextAreaGenerator"/>
         <show-property name="ser:status" display-label-id="series_status" read-only="true" classificatorName="docListUnitStatus"
            component-generator="ClassificatorSelectorGenerator" />
         <show-property name="ser:order" display-label-id="series_order" converter="javax.faces.Integer" />
         <show-property name="ser:docType" display-label-id="series_docType" component-generator="SearchGenerator" pickerCallback="#{DocumentTypeDialog.searchUsedDocTypes}"
            converter="ee.webmedia.alfresco.document.type.web.DocumentTypeConverter" dialogTitleId="series_docType_popUpInfo" />
         <show-property name="ser:register" display-label-id="series_register" readOnlyIf="ser:status=suletud" component-generator="GeneralSelectorGenerator"
            converter="javax.faces.Integer" selectionItems="#{RegisterListDialog.findActiveRegisters}" />
         <show-property name="ser:individualizingNumbers" display-label-id="series_individualizingNumbers" readOnlyIf="ser:status=suletud" component-generator="CheckboxGenerator" />
         <show-property name="doccom:accessRestriction" component-generator="ClassificatorSelectorGenerator" classificatorName="accessRestriction"
            readOnlyIf="ser:status=suletud" />
         <show-property name="doccom:accessRestrictionReason" mandatoryIf="accessRestriction" component-generator="ClassificatorSelectorAndTextGenerator"
            classificatorName="accessRestrictionReason" styleClass="expand19-200" layoutStyle="default(could also use sideBySide)" readOnlyIf="ser:status=suletud" />
         <show-property name="doccom:accessRestrictionBeginDate" display-label-id="document_accessRestrictionDate" textId="document_eventDates_templateText"
         component-generator="InlinePropertyGroupGenerator" optionsSeparator="¤" props="
             doccom:accessRestrictionBeginDate¤¤styleClass=date inline¤readOnlyIf=ser:status=suletud¤mandatoryIf=accessRestriction
            ,doccom:accessRestrictionEndDate¤¤styleClass=date inline¤readOnlyIf=ser:status=suletud
            "
         />
         <show-property name="doccom:accessRestrictionEndDesc" readOnlyIf="ser:status=suletud" />
         <show-property name="ser:structUnit" display-label-id="series_structUnit" component-generator="SearchGenerator"
            pickerCallback="#{OrganizationStructureListDialog.searchOrgstructs}" converter="ee.webmedia.alfresco.orgstructure.web.OrganizationStructureConverter"
            dialogTitleId="series_structUnit_popUpInfo" />
         <show-property name="ser:retentionPeriod" display-label-id="series_retentionPeriod" converter="javax.faces.Integer" />
         <show-property name="ser:retentionDesc" display-label-id="series_retentionDesc" styleClass="expand19-200" component-generator="TextAreaGenerator" />
      </property-sheet>
   </config>
</alfresco-config>

