<alfresco-config>

   <!-- TODO bold titles -->
   <!-- TODO view mode -->

   <config evaluator="aspect-name" condition="doccom:common" replace="true">
      <property-sheet>
      </property-sheet>
   </config>

   <config evaluator="aspect-name" condition="doccom:common"><!-- this condition must not be 'doccom:accessRights', because accessrights aspect is also used in series node -->
      <property-sheet>
         <!-- XXX: SIMILAR accessRestriction-related properties are defined in series-web-client-config.xml - might need to sync changes -->
         <show-property name="doccom:accessRestriction" readOnlyIf="doccom:docStatus=lõpetatud||peatatud" component-generator="ClassificatorSelectorGenerator" classificatorName="accessRestriction" />
         <show-property name="doccom:accessRestrictionReason" readOnlyIf="doccom:docStatus=lõpetatud||peatatud" mandatoryIf="accessRestriction" component-generator="ClassificatorSelectorAndTextGenerator" classificatorName="accessRestrictionReason" styleClass="expand5-200" />
         <show-property name="accessRestrictionDate" show-in-edit-mode="false" display-label-id="document_accessRestrictionDate" />
         <show-property name="doccom:accessRestrictionBeginDate" readOnlyIf="doccom:docStatus=suletud" mandatoryIf="accessRestriction" show-in-view-mode="false" />
         <show-property name="doccom:accessRestrictionEndDate" readOnlyIf="doccom:docStatus=suletud" show-in-view-mode="false" />
         <show-property name="doccom:accessRestrictionEndDesc" readOnlyIf="doccom:docStatus=suletud" styleClass="expand5-200" component-generator="TextAreaGenerator" />
         <separator name="sep1" component-generator="SeparatorGenerator" />
      </property-sheet>
   </config>

   <config evaluator="aspect-name" condition="doccom:owner">
      <property-sheet>
         <show-property name="owner" show-in-edit-mode="false" display-label-id="document_owner" component-generator="UnescapedOutputTextGenerator" />
         <show-property name="doccom:ownerName" show-in-view-mode="false" read-only="true" component-generator="SearchGenerator" pickerCallback="#{UserListDialog.searchUsers}" setterCallback="#{MetadataBlockBean.setOwner}" editable="true" dialogTitleId="users_search_title" />
         <show-property name="doccom:ownerJobTitle" show-in-view-mode="false" readOnlyIf="doccom:docStatus=lõpetatud||peatatud" labelStyleClass="secondary" />
         <show-property name="doccom:ownerOrgStructUnit" show-in-view-mode="false" readOnlyIf="doccom:docStatus=lõpetatud||peatatud" labelStyleClass="secondary" />
         <show-property name="doccom:ownerEmail" show-in-view-mode="false" readOnlyIf="doccom:docStatus=lõpetatud||peatatud" labelStyleClass="secondary" />
         <show-property name="doccom:ownerPhone" show-in-view-mode="false" readOnlyIf="doccom:docStatus=lõpetatud||peatatud" labelStyleClass="secondary" />
      </property-sheet>
   </config>

   <config evaluator="aspect-name" condition="doccom:common">
      <property-sheet>
         <separator name="sep2" component-generator="SeparatorGenerator" />
         <show-property name="doccom:docName" readOnlyIf="doccom:docStatus=lõpetatud||peatatud" />
         
         <show-property name="{temp}function_fnSerVol" display-label-id="function" component-generator="RelatedDropdownGenerator" group="fnSerVol" order="1" selectionItems="#{MetadataBlockBean.findAllFunctions}" initialSelectionItems="#{MetadataBlockBean.findAllFunctions}" forcedMandatory="true" />
         <show-property name="{temp}series_fnSerVol" display-label-id="series" component-generator="RelatedDropdownGenerator" group="fnSerVol" order="2" selectionItems="#{MetadataBlockBean.findAllSeries}" initialSearchCriteriaSourceProp="{temp}function_fnSerVol" forcedMandatory="true" />
         <show-property name="{temp}volume_fnSerVol" display-label-id="volume" component-generator="RelatedDropdownGenerator" group="fnSerVol" order="3" selectionItems="#{MetadataBlockBean.findAllVolumes}" initialSearchCriteriaSourceProp="{temp}series_fnSerVol" forcedMandatory="true" />
         
         <show-property name="regNumberDate" show-in-edit-mode="false" display-label-id="document_regNumberDate" />
         <show-property name="doccom:regNumber" show-in-view-mode="false" read-only="true" />
         <show-property name="doccom:regDateTime" show-in-view-mode="false" read-only="true" component-generator="DatePickerGenerator" />
      </property-sheet>
   </config>

   <config evaluator="aspect-name" condition="docspec:sender">
      <property-sheet>
         <show-property name="senderRegNumberDate" show-in-edit-mode="false" display-label-id="document_senderRegNumberDate" />
         <show-property name="docspec:senderRegNumber" show-in-view-mode="false" readOnlyIf="doccom:docStatus=lõpetatud||peatatud" />
         <show-property name="docspec:senderRegDate" show-in-view-mode="false" readOnlyIf="doccom:docStatus=lõpetatud||peatatud" />
      </property-sheet>
   </config>

   <config evaluator="aspect-name" condition="doccom:signer">
      <property-sheet>
         <show-property name="signer" show-in-edit-mode="false" display-label-id="document_signer" />
         <show-property name="doccom:signerName" show-in-view-mode="false" readOnlyIf="doccom:docStatus=lõpetatud||peatatud" component-generator="SearchGenerator" pickerCallback="#{UserListDialog.searchUsers}" setterCallback="#{MetadataBlockBean.setSigner}" editable="true" dialogTitleId="users_search_title" />
         <show-property name="doccom:signerJobTitle" show-in-view-mode="false" readOnlyIf="doccom:docStatus=lõpetatud||peatatud" labelStyleClass="secondary" />
      </property-sheet>
   </config>

   <config evaluator="aspect-name" condition="doccom:common">
      <property-sheet>
         <separator name="sep3" component-generator="SeparatorGenerator" />
      </property-sheet>
   </config>

   <config evaluator="aspect-name" condition="doccom:recipient">
      <property-sheet>
         <separator name="recipient-note-sep" component-generator="RecipientNoteGenerator" show-in-view-mode="false" />
         <show-property name="recipients" show-in-edit-mode="false" display-label-id="document_recipients" component-generator="UnescapedOutputTextGenerator" />
         <show-property name="doccom:recipientName" show-in-view-mode="false" readOnlyIf="doccom:docStatus=lõpetatud||peatatud" display-label-id="document_recipients" component-generator="MultiValueEditorGenerator" props="doccom:recipientName,doccom:recipientEmail" pickerCallback="#{AddressbookDialog.searchContacts}" setterCallback="#{AddressbookDialog.getContactData}" dialogTitleId="contacts_search_title" />
         <show-property name="doccom:recipientEmail" show-in-view-mode="false" readOnlyIf="doccom:docStatus=lõpetatud||peatatud" show-in-edit-mode="false" /><!-- editing handled by above component -->
      </property-sheet>
   </config>

   <config evaluator="aspect-name" condition="doccom:additionalRecipient">
      <property-sheet>
         <show-property name="additionalRecipients" show-in-edit-mode="false" display-label-id="document_additional_recipients" component-generator="UnescapedOutputTextGenerator" />
         <show-property name="doccom:additionalRecipientName" show-in-view-mode="false" readOnlyIf="doccom:docStatus=lõpetatud||peatatud" display-label-id="document_additional_recipients" component-generator="MultiValueEditorGenerator" props="doccom:additionalRecipientName,doccom:additionalRecipientEmail" pickerCallback="#{AddressbookDialog.searchContacts}" setterCallback="#{AddressbookDialog.getContactData}" dialogTitleId="contacts_search_title" />
         <show-property name="doccom:additionalRecipientEmail" show-in-view-mode="false" readOnlyIf="doccom:docStatus=lõpetatud||peatatud" show-in-edit-mode="false" /><!-- editing handled by above component -->
      </property-sheet>
   </config>

   <config evaluator="aspect-name" condition="doccom:common">
      <property-sheet>
         <show-property name="doccom:sendDesc" readOnlyIf="doccom:docStatus=lõpetatud||peatatud" styleClass="expand5-200" component-generator="TextAreaGenerator" />
         <separator name="sep4" component-generator="SeparatorGenerator" />
      </property-sheet>
   </config>

   <config evaluator="aspect-name" condition="docspec:template">
      <property-sheet>
         <!-- TODO will be done when templates are ready -->
         <show-property name="docspec:templateName" readOnlyIf="doccom:docStatus=lõpetatud||peatatud" component-generator="GeneralSelectorGenerator" selectionItems="#{MetadataBlockBean.findDocumentTemplates}" />
      </property-sheet>
   </config>

   <config evaluator="aspect-name" condition="doccom:common">
      <property-sheet>
         <show-property name="doccom:docStatus" read-only="true" />
         <show-property name="doccom:comment" readOnlyIf="doccom:docStatus=lõpetatud||peatatud" styleClass="expand5-200" component-generator="TextAreaGenerator" />
         <show-property name="doccom:keywords" readOnlyIf="doccom:docStatus=lõpetatud||peatatud" component-generator="ClassificatorSelectorAndTextGenerator" classificatorName="keywords" styleClass="expand5-200" />
         <show-property name="doccom:storageType" readOnlyIf="doccom:docStatus=lõpetatud||peatatud" component-generator="ClassificatorSelectorGenerator" classificatorName="storageType" />
      </property-sheet>
   </config>

</alfresco-config>
