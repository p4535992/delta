!function(){"use strict";function t(t,e,n,r){e&&(e=o(e)),n&&(n=o(n)),r&&(r=o(r));var i=function(){for(var o=[],i=arguments.length;i--;)o[i]=arguments[i];var a,s={};e&&e(this,o,s,t);try{return a=t.call.apply(t,[this].concat(o))}catch(e){throw r&&r(this,o,s,e,t),Object.defineProperty(e,Nt,{value:!0,enumerable:!1}),e}finally{n&&n(this,o,s,a,t)}};return Object.defineProperty(i,Lt,{value:t,enumerable:!1}),i}function e(e,n,r,o){if(e[n]){var i=e[n];e[n]=t(i,r,o)}}function n(e,n,r){var o=r.before,i=r.after,a=r.onerror;if("function"!=typeof e)return e;try{e[jt]}catch(t){if(0!==t.message.indexOf(Mt))throw t;return e}e[jt]||Object.defineProperty(e,jt,{value:Ct++,enumerable:!1});var s=e[At];return s||(s={},Object.defineProperty(e,At,{value:s,enumerable:!1})),e[At][n]||(e[At][n]=t(e,o,i,a)),e[At][n]}function r(t,e){try{if("function"!=typeof t||!t[At]&&!t[jt])return t}catch(e){if(0!==e.message.indexOf(Mt))throw e;return t}return t[At]&&t[At][e]?t[At][e]:t}function o(t){return function(){for(var e=[],n=arguments.length;n--;)e[n]=arguments[n];try{return t.call.apply(t,[this].concat(e))}catch(t){try{Rt(t)}catch(t){}}}}function i(t){Rt=t}function a(t,e){var n=arguments;if("function"==typeof Object.assign)return Object.assign.apply(Object,arguments);if(null===t)throw new TypeError("Cannot convert undefined or null to object");for(var r=Object(t),o=1;o<arguments.length;o++){var i=n[o];if(null!==i)for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])}return r}function s(t,e,n){if("function"==typeof t.find)return t.find(e,n);for(var r=t.length,o=0;o<r;){var i=t[o];if(e.call(n,i,o,t))return i;o++}}function c(t,e,n){if("function"==typeof t.forEach)return t.forEach(e,n);for(var r=0;r<t.length;r++)e.call(n,t[r],r,t)}function u(t,e,n){return"function"==typeof t.includes?t.includes(e,n):-1!==t.indexOf(e,n)}function l(t){return"function"==typeof Math.trunc?Math.trunc(t):t-t%1}function d(t,e,n){return t.substr(n||0,e.length)===e}function p(t,e,n){return n||(n=1e3/30),Math.abs(t-e)<n}function f(t,e){e||(e=document.location.href);var n=document.createElement("a");n.href=t,t=n.href;var r=e.indexOf("/"),o=e.indexOf("/",r+2)+1;return t.substr(0,o)===e.substr(0,o)}function h(){}function v(t){var e=document.createElement("a");return e.href=t,e.href}function m(t,e){if(!t||!e)return!1;var n=!1;return e.excludedDomains.forEach(function(e){-1!==t.indexOf(e)&&(n=!0)}),n}function g(t,e,n){var r,o,i=null,a=0;n||(n={});var s=function(){a=!1===n.leading?0:Gt(),i=null,t.apply(r,o),i||(r=o=null)};return function(){var c=Gt();a||!1!==n.leading||(a=c);var u=e-(c-a);r=this,o=arguments,u<=0||u>e?(i&&(clearTimeout(i),i=null),a=c,t.apply(r,o),i||(r=o=null)):i||(i=Bt(s,u))}}function y(){try{return window.self!==window.top}catch(t){return!0}}function b(t,e){var n=t.indexOf(e);n>-1&&t.splice(n,1)}function w(t){var e=window.crypto||window.msCrypto;if(e&&e.getRandomValues)try{for(var n=new Int32Array(t),r=e.getRandomValues(n),o=[],i=0;i<r.length;i++)o.push(r[i]);return o}catch(t){}}function _(t){var e=w(t);return e?e.join(","):e}function S(t){for(var e={},n=document.cookie?document.cookie.split("; "):[],r=0;r<n.length;r++){var o=n[r].indexOf("="),i=n[r].slice(0,o).replace(Vt,decodeURIComponent),a=n[r].slice(o+1).replace(Vt,decodeURIComponent);t&&0!==i.indexOf(t)||(e[i]=a)}return e}function E(t){return decodeURIComponent(document.cookie.replace(new RegExp("(?:(?:^|.*;)\\s*"+encodeURIComponent(t).replace(/[-.+*]/g,"\\$&")+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1"))||null}function k(t,e){document.cookie=t+"="+e+"; max-age=315360000; path=/"}function I(t){document.cookie=t+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/",document.cookie=t+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT"}function O(t,e){return("000000000000000"+t.toString(16)).substr(-e)}function T(t){return O(t>>>16,4)}function x(t){return O(65535&t,4)}function P(t){return T(t)+x(t)}function L(t){if(t&&4===t.length)return P(t[0])+"-"+T(t[1])+"-"+x(t[1])+"-"+T(t[2])+"-"+x(t[2])+P(t[3])}function N(t){return-1!==t.indexOf(",")}function A(t){try{for(var e=t.split(","),n=[],r=0;r<e.length;r++)n.push(parseInt(e[r]));var o=L(n);return o||t}catch(e){return t}}function j(){try{return L(w(4))}catch(t){}}function M(t){try{return window.localStorage.getItem(t)}catch(t){}return E(t)}function C(t){try{return window.sessionStorage.getItem(t)}catch(t){}return M(t)}function R(t,e){try{return window.localStorage.setItem(t,e)}catch(t){}k(t,e)}function U(t,e){try{return window.sessionStorage.setItem(t,e)}catch(t){}return R(t,e)}function D(t){var e={};return Object.getOwnPropertyNames(t).forEach(function(n){e[n]=t[n]}),!e.stack&&t.stack&&(e.stack=t.stack),e}function B(t){function e(e,n){t.zoner&&t.zoner.root.transaction&&!n?t.zoner.root.transaction.event({type:"log",ts:Gt(),data:e}):(e.ts=Gt(),t.send.log(e))}t._consoleQueue=[];var n=document.querySelector("script[data-plumbr]"),r="";return n&&(r=n.src),window.addEventListener("error",function(e){window.ErrorEvent&&e instanceof ErrorEvent&&e.filename===r&&e.error&&!e.error[Nt]&&(t.console.error("Runtime Error",D(e.error)),e.preventDefault())}),{init:function(){if(!this.inited){t.console._log=function(t,n){var r=!1;!0===n[0]&&(n=n.slice(1,n.length),r=!0),e({level:t,data:n},r)},!0,t._consoleQueue.map(function(e){return(n=t.console)._log.apply(n,e);var n}),!1,t._consoleQueue=[],this.inited=!0}},_log:function(){for(var e=[],n=arguments.length;n--;)e[n]=arguments[n];t._consoleQueue.push(e)},log:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];this._log("log",t)},info:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];this._log("info",t)},warn:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];this._log("warning",t)},error:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];this._log("error",t)}}}function F(t,e){try{return e.call(this)}catch(e){console.error("[PLUMBR] Error in API "+t+":",e.message)}}function z(t){function e(e,n,r,o,i){t.domeventWrappers.before(q(e),n,r,o,i)}var n=t.domeventWrappers.after;if(window.EventTarget)X(t,window.EventTarget.prototype,e,n);else{var r=[];ce.forEach(function(t){if(window[t]){for(var e=window[t].prototype;e&&-1===Object.getOwnPropertyNames(e).indexOf("addEventListener");)e=Object.getPrototypeOf(e);e&&!u(r,e)&&r.push(e)}}),r.forEach(function(r){return X(t,r,e,n)})}}function H(t){var e=t[2]&&"object"==typeof t[2]?t[2].capture:t[2];return{capture:e,key:q(e)}}function q(t){return"event_"+(t?"true":"false")}function X(t,n,o,i){var a=o.bind(void 0,!0),s=o.bind(void 0,!1);e(n,"addEventListener",function(e,n){var r=n[1];if("function"==typeof r){var o=H(n),c=o.capture,u=o.key,l=t.core.wrapper.wrapReusableUserCallback(r,u,{before:c?a:s,after:i});if(n[1]=l,e||(e=window),e[ue]||Object.defineProperty(e,ue,{value:{}}),r&&r[jt]){var d=u+"_"+n[0]+"_"+r[jt];e[ue][d]=t.current}}}),e(n,"removeEventListener",function(t,e){var n=H(e).key;e[1]=r(e[1],n)})}function W(t,e,n){var r=t.target;r===document&&(r=document.documentElement);var o={type:"domevent",ts:n,data:{type:"key",element:r}};if(e.conf.includeKey&&!(r instanceof HTMLInputElement&&"password"===r.type)){var i=t.key&&"Unidentified"!==t.key?t.key:String.fromCharCode(t.charCode);if(e.conf.includeKey instanceof Array&&(s(e.conf.includeKey,function(t){return"common"===t?de.indexOf(i)>=0:"letter"===t?/^[A-zÀ-ž]$/.test(i):"number"===t?/^[0-9]$/.test(i):t.toLowerCase()===i.toLowerCase()})||(i=null)),i){var a=[];Object.keys(pe).forEach(function(e){var n=pe[e];t[n]&&a.push(e)}),o.data.key=i,o.data.modifiers=a}}return o}function J(t){return t.code?t.code:t.keyCode?t.keyCode:t.which}function K(t,e,n,r){var o={type:"domevent",ts:n,data:{type:t.type}};try{var i;(i=t.path&&t.path.length>0?t.path[0]:t.target)!==document&&i!==window||(i=document.documentElement),i instanceof Element&&i.tagName&&(o.data.element=i)}catch(t){}return r&&r(t,e,o),o}function G(t){var e=Object.keys(t.conf.events);return le.forEach(function(t){-1===e.indexOf(t)&&e.push(t)}),e}function $(t,e,n){var r=t.target;t.clientX>0||t.clientY>0||V(r)?n.data.mouseButton=t.button:window.Notification&&r instanceof Notification?n.data.notification=!0:n.data.isSubmit=!0}function V(t){if(t.getBoundingClientRect){var e=t.getBoundingClientRect();return e&&0===e.left&&0===e.top}return!1}function Q(t){return function(e,n,r,o){t.inActiveState()||e.transaction&&!(e instanceof Se)||(o.leave=t.enterState(e))}}function Y(){return function(t,e,n){var r=n.leave;r&&r()}}function Z(t){function e(){for(var i=[],a=arguments.length;a--;)i[a]=arguments[a];"function"==typeof i[0]&&(i[0]=t.core.wrapper.wrapUserCallback(i[0],{before:n.bind(void 0,t.current),after:r}));var s=new(Function.prototype.bind.apply(o,[null].concat(i)));return s.__proto__=e.prototype,s}if(window.Promise){var n=Q(t),r=Y(t),o=window.Promise;e.__proto__=o,e.prototype.__proto__=o.prototype,e.prototype.then=function(){for(var e=[],i=arguments.length;i--;)e[i]=arguments[i];return e=e.map(function(e){return"function"==typeof e?t.core.wrapper.wrapUserCallback(e,{before:n.bind(void 0,t.current),after:r}):e}),o.prototype.then.apply(this,e)},window.Promise=e}}function tt(t){function e(t,e,r){for(var o=0;o<e.length;o++)n(t,e[o],r)}function n(e,n,r){var a="on"+n,s=Object.getOwnPropertyDescriptor(e,a);if(!s&&r&&Object.getOwnPropertyDescriptor(r,a)&&(s={enumerable:!0,configurable:!0}),s&&s.configurable){delete s.writable,delete s.value;var c=s.get,u=s.set;s.set=function(r){var a=this;if(a||e!==window||(a=window),a){if("function"==typeof r){var s=r;if(r=t.core.wrapper.wrapReusableUserCallback(r,"onprop_event",{before:o,after:i}),a[ue]||Object.defineProperty(a,ue,{value:{}}),s&&s[jt]){var c=ke+"_"+n+"_"+s[jt];a[ue][c]=t.current}}u.apply(this,[r])}},s.get=function(){if(c){var t=c&&c.apply(this);return t&&t[Lt]&&(t=t[Lt]),t}return null},Object.defineProperty(e,a,s)}}var r=G(t.core);Ee.forEach(function(t){-1===r.indexOf(t)&&r.push(t)}),et()&&(e(Element.prototype,r),e(HTMLElement.prototype,r),window.MessagePort&&e(MessagePort.prototype,["message"]));var o=t.domeventWrappers.before.bind(void 0,ke),i=t.domeventWrappers.after}function et(){if(!Object.getOwnPropertyDescriptor(HTMLElement.prototype,"onclick")&&"undefined"!=typeof Element){var t=Object.getOwnPropertyDescriptor(Element.prototype,"onclick");if(t&&!t.configurable)return!1}var e=Object.getOwnPropertyDescriptor(XMLHttpRequest.prototype,"onreadystatechange");if(e){Object.defineProperty(XMLHttpRequest.prototype,"onreadystatechange",{enumerable:!0,configurable:!0,get:function(){return!0}});var n=!!(new XMLHttpRequest).onreadystatechange;return Object.defineProperty(XMLHttpRequest.prototype,"onreadystatechange",e||{}),n}}function nt(){return Ae}function rt(t){function n(e,n){void 0===e&&(e=document.location.href),void 0===n&&(n={});var r={type:"nav",ts:Gt(),data:{url:e}};a(r.data,n),t.core.events.sendEvent(r)}function r(e,r){if(!u(o,e)){o.push(e);var a=!1,s=Ae.split("#",1),c=e.split("#",1);if(s[0]===c[0]&&(a=!0),t.inActiveState()||!r||!i&&a){var l={old:Ae};a&&(l.hashChange=!0),n(e,l)}else{var d=t.enterNewState(Te,["NAV#user"]).leave;n(e,{old:Ae,userInitiated:!0}),Bt(function(){d()},1)}Bt(function(){var t=o.indexOf(e);t>-1&&o.splice(t,1)},33)}}window.history&&(history.pushState&&e(history,"pushState",function(t,e,n){n.old=document.location.href},function(t,e,r){var o=r.old;n(document.location.href,{old:o}),Ae=document.location.href}),history.replaceState&&e(history,"replaceState",function(t,e,n){n.old=document.location.href},function(t,e,r){var o=r.old;n(document.location.href,{old:o,replacing:!0}),Ae=document.location.href}));var o=[];Ut.call(window,"popstate",function(){r(document.location.href,!0),Ae=document.location.href},{capture:!0}),Ut.call(window,"hashchange",function(){r(document.location.href,!0),Ae=document.location.href},{capture:!0});var i=!1;return Ut.call(window,"load",function(){Bt(function(){Ae!==document.location.href&&(r(document.location.href),Ae=document.location.href),i=!0},1)},{capture:!0}),function(){Ae!==document.location.href&&(r(document.location.href),Ae=document.location.href)}}function ot(t){for(var e,n,r=[],o=0,i=0,a=" > ".length;t&&o++<5&&(window.ShadowRoot&&t instanceof ShadowRoot&&(t=t.host),t instanceof Element);){var s=t.tagName.toLowerCase();if("html"===s){r.push(s);break}n||(e=it(t),o>1&&i+r.length*a+e.length>=80&&(n=!0)),n&&(e=s),r.push(e),i+=e.length,t=t.parentNode}return r.reverse().join(" > ")}function it(t){var e,n,r,o,i,a=[];if(!t||!t.tagName)return"";if(a.push(t.tagName.toLowerCase()),t.id&&a.push("#"+t.id),(e=t.className)&&at(e))for(n=e.trim().split(" "),i=0;i<n.length;i++)a.push("."+n[i]);var s=["type","name","title","alt"];for(i=0;i<s.length;i++)r=s[i],(o=t.getAttribute(r))&&a.push("["+r+'="'+o+'"]');return a.join("")}function at(t){return"[object String]"===Object.prototype.toString.call(t)}function st(t,e){var n={},r=t,o=0,i={values:!0,labels:!0,urls:!0};if(e&&a(i,e),Ce.indexOf(t.tagName)>=0){var c=t.id;if(c){var u=document.querySelector('label[for="'+c.replace('"','\\"')+'"]');u&&(n.label=u.textContent.trim(),i.labels=!1)}}for(;!(!r||r===document.body||!s(Object.keys(i),function(t){return i[t]}));){if(i.values){var l;if(o>2)i.values=!1;else if(r instanceof HTMLInputElement&&Re.indexOf(r.type)>=0)l=r.value,i.values=!1;else if(r instanceof HTMLImageElement)n.image=r.src,n.alt=r.alt,i.values=!1;else if(r instanceof HTMLSelectElement){var d=r.children[0];d instanceof HTMLOptionElement&&(l=d.textContent),i.values=!1}else je.indexOf(r.tagName)>=0?l=r.textContent:Me.indexOf(r.tagName)>=0&&(l=r.title);l&&(l.length<=De&&(n.text=l),i.values=!1)}if(i.labels)if(o>3&&(i.labels=!1),r instanceof HTMLLabelElement)n.label=r.textContent.trim(),i.labels=!1;else if(r instanceof HTMLFormElement)i.labels=!1;else if(t.getAttribute&&t.getAttribute("aria-label"))n.label=t.getAttribute("aria-label"),i.labels=!1;else if(t.getAttribute&&t.getAttribute("aria-labelledby")){var p=t.getAttribute("aria-labelledby").split(" ").map(function(t){var e=document.getElementById(t);return e?e.textContent:null}).filter(function(t){return t});p.length&&(n.label=p.join("\n")),i.labels=!1}i.urls&&(o>Ue?i.urls=!1:r instanceof HTMLAnchorElement&&(n.url=r.href)),r=r.parentNode,o++}return n}function ct(t){for(var e=0;t&&t!==document.body&&e<=Ue;){if(t instanceof HTMLAnchorElement)return t;t=t.parentNode,e++}return null}function ut(t){return!("ping"===t.type||t.data&&t.data.end)}function lt(t){var e=t.reduce(function(e,n,r){if(0===r)return e;var o=t[r-1];return e.push(o-n),e},[]);e.sort(function(t,e){return t-e});var n=e[l(e.length/2)];return e.filter(function(t){return t-n<Fe}).length===e.length}function dt(t){try{if(!window.sessionStorage)return}catch(t){return}try{if(window.sessionStorage&&"function"==typeof sessionStorage.getItem){var e=sessionStorage.getItem(qe);if(e){var n=JSON.parse(e);return window.performance&&performance.timing&&(!performance.timing.unloadEventStart||!performance.timing.unloadEventEnd||performance.timing.unloadEventStart-26>n.unloadTime||performance.timing.unloadEventEnd+26<n.unloadTime)?(p(n.unloadTime,performance.timing.navigationStart,1e3)&&t.console.warn("Old tx might be relevant",n,performance.timing.navigationStart,[performance.timing.unloadEventStart,performance.timing.unloadEventEnd]),t.console.warn("abandoning TX",n.txId,performance.timing.unloadEventStart,n.unloadTime,performance.timing.unloadEventEnd),null):(sessionStorage.removeItem(qe),n)}}}catch(e){t.console.error("tx recovery error",D(e))}}function pt(t,e,n,r){try{if(!window.sessionStorage)return!1;sessionStorage.setItem("__plmbr_test","ok");var o=sessionStorage.getItem("__plmbr_test");if(sessionStorage.removeItem("__plmbr_test"),"ok"!==o)return!1}catch(t){return!1}try{return sessionStorage.setItem(qe,JSON.stringify({beforeUnloadTime:n,unloadTime:Date.now(),txId:e.id,events:r})),!0}catch(e){t.console.error("saving error",D(e))}return!1}function ft(t,e,n,r){}function ht(t,e){for(var n=t,r=6;n&&(!e||n.getEventData)&&(n.sendRelatedEvent(),n=n.parent,!(--r<0)););}function vt(t){return window.performance.timing.navigationStart+t}function mt(t,e,n,r){void 0===n&&(n=!1),void 0===r&&(r=[]);var o={};for(var i in t){var a=Ve[i];a||(a=i),"string"==typeof a&&(a={key:a});var s=a.include;void 0===s&&(s=!1);var c=a.key,l=a.renderTime;void 0===l&&(l=!1);var d=a.timestamp;if(void 0===d&&(d=!0),l===n&&!u(r,c))if("number"==typeof t[i]&&t[i]>0){var p=t[i];e&&d&&(p=vt(p)),o[c]=p}else s&&(o[c]=t[i])}return o}function gt(t){window.performance&&performance.timing&&wt(performance.timing)&&(t.rt=mt(performance.timing))}function yt(t){if(window.performance&&window.performance.timing)return mt(performance.timing,!1,!0,t)}function bt(t,e){if(t&&wt(t,!0))return e.rt=mt(t,!0),e}function wt(t,e){var n=e?vt(t.fetchStart):t.fetchStart;return Math.abs(n-Gt())<$e}function _t(){performance.getEntriesByType&&(Ze=performance.getEntriesByType("resource")),Ze.length,performance.clearResourceTimings&&performance.clearResourceTimings()}function St(t,e){function n(t){return t.reduceRight(function(t,e){if(t&&t.responseEnd>e.responseEnd)return t;if(r||o){var n=0;if(r&&(n+=Math.abs(r-vt(e.startTime))),o&&(n+=Math.abs(o-vt(e.responseEnd))),n>Ye)return t}return e},null)}void 0===e&&(e={});var r=e.start,o=e.end;if(!Qe)return null;var i,a=performance.getEntriesByName(t);return a&&a.length&&(i=n(a))?i:Ze&&Ze.length&&(a=Ze.filter(function(e){return e.name===t}))&&a.length&&(i=n(a))?i:null}function Et(t){var e=t.tagName.toUpperCase(),n=on[e];return!(!n||n.matches&&!n.matches(t)||!t.getAttribute(n.attr))&&n}function kt(t,e,n){var r={};if(n||(r.start=Gt()),St(e,r))return!0;if(t instanceof HTMLImageElement)return t.complete;if(t instanceof HTMLIFrameElement)try{return t.contentWindow.location.href!==e}catch(t){return n}if(t instanceof HTMLLinkElement)try{return t.sheet&&t.sheet.cssRules&&t.sheet.cssRules.length}catch(t){return n}return!1}function It(t){switch(t.type){case"click":var e=ct(t.target);return!e||e.target&&"_self"!==e.target||!e.href?null:e;case"submit":if(t.target instanceof HTMLFormElement){var n=t.target;if(!n.target||"_self"===n.target)return n}return null;default:return null}}function Ot(t,e){return"click"===t.type&&(!t.which||1===t.which)&!t.button?e.href&&f(e.href):"submit"===t.type&&t.target instanceof HTMLFormElement&&f(e.action)}function Tt(t){var e={cancelInFrame:!1,events:{beforeunload:!0,blur:!0,change:!0,click:!0,contextmenu:!0,dblclick:!0,drag:!0,dragend:!0,dragenter:!0,dragleave:!0,dragover:!0,dragstart:!0,drop:!0,focus:!0,input:!0,mousedown:!0,mouseenter:!0,mouseleave:!0,mousemove:!0,mouseover:!0,mouseout:!0,mouseup:!0,reset:!0,resize:!0,scroll:!0,select:!0,submit:!0,touchend:!0,touchmove:!0,touchstart:!0,wheel:!0},excludedDomains:["olark.com","facebook.com/connect/ping","google.com/maps/vt"],includeKey:!1,inlineEvents:!0,ignoreTimeout:1e3,maxBatchSize:300,navOnly:!1,pingFreq:3e4,sendFreq:2e3,senders:["xhr","beacon","image"],user:null,tracking:{user:!0,session:!0,cookie:!0},xhrSendJson:!0};return Object.keys(t).forEach(function(n){if("events"!==n)e[n]=t[n];else{var r=t.events;Object.keys(r).forEach(function(t){e.events[t]=r[t]})}}),e}function xt(t){if(!t||"function"!=typeof t)return!1;var e=new(t.apply(function(t){this&&(this.val=t)},[null,"ok"]));return e&&"ok"===e.val}function Pt(){var t=_(1);return Boolean(Object.defineProperty&&t&&t.length>0)}var Lt="__plumbr_func_unwrapped",Nt="__plumbr_from_wrapped",At="__plumbr_cbs",jt="__plumbr_cbi",Mt="Permission denied",Ct=1,Rt=function(){},Ut=function(){return this.addEventListener&&this.addEventListener[Lt]?this.addEventListener[Lt].apply(this,arguments):this.addEventListener.apply(this,arguments)},Dt=window.setInterval,Bt=window.setTimeout,Ft=window.XMLHttpRequest,zt=window.XMLHttpRequest.prototype.open,Ht=window.XMLHttpRequest.prototype.send,qt=function(t,e,n){void 0===t&&(t=5),void 0===e&&(e=1/0),void 0===n&&(n={});var r=n.getId;void 0===r&&(r=function(t){return t});var o=n.getMeta;void 0===o&&(o=void 0);var i=n.metaChecker;void 0===i&&(i=void 0);var a=n.metaLimit;void 0===a&&(a=t);var s=n.onSpam;void 0===s&&(s=void 0),this.enabled=!0,this.blacklist=[],this.tracker={},this.threshold=t,this.timeout=e,this.getId=r,this.getMeta=o,this.metaChecker=i,this.metaLimit=a,this.onSpam=s};qt.prototype.destroy=function(){this.enabled=!1,this.blacklist.splice(0),this.tracker={}},qt.prototype.isSpammy=function(t){if(!this.enabled)return!1;var e=this.getId(t);if(u(this.blacklist,e))return!0;void 0===this.tracker[e]&&(this.tracker[e]={count:0,meta:[]});var n=this.tracker[e];if(n.count++,this.getMeta&&(n.meta.unshift(this.getMeta(t)),n.meta.length>this.metaLimit&&n.meta.splice(this.metaLimit)),n.count>this.threshold&&(!this.metaChecker||this.metaChecker(n.meta)))return this.blacklist.push(e),delete this.tracker[e],this.onSpam&&this.onSpam(e),!0;this.timeout!==1/0&&setTimeout(this._reduceSpam.bind(this,e),this.timeout)},qt.prototype._reduceSpam=function(t){if(void 0!==this.tracker[t]){var e=this.tracker[t];e.count--,e.count<1&&delete this.tracker[t]}};var Xt={name:["name"],message:["message"],file:["fileName","filename"],lineno:["lineNumber","lineno"],colno:["columnNumber","colno"],stack:["stack"]},Wt=function(t){this.core=t,this.spamDetect=new qt(5,1e4,{getId:function(t){return t.message}}),this.addGlobalHooks()};Wt.prototype.addGlobalHooks=function(){var t=this;Ut.call(window,"error",o(function(e){(!window.ErrorEvent||e instanceof ErrorEvent)&&(window.lastErrEvent=e,e.error?t.processError(e.error,e,{source:"bubble"}):t.processEvent(e,{source:"bubble"}))}))},Wt.prototype.processError=function(t,e,n){if(t&&!t.__plumbr_error_gathered){var r={};n&&a(r,n),Object.keys(Xt).forEach(function(n){s(Xt[n],function(o){return void 0!==t[o]?(r[n]=t[o],!0):e&&void 0!==e[o]?(r[n]=e[o],!0):void 0})}),this.sendData(r),Object.defineProperty(t,"__plumbr_error_gathered",{value:!0,enumerable:!1})}},Wt.prototype.processEvent=function(t,e){var n={};e&&a(n,e),Object.keys(Xt).forEach(function(e){s(Xt[e],function(r){if(t&&void 0!==t[r])return n[e]=t[r],!0})}),this.sendData(n)},Wt.prototype.sendData=function(t){this.spamDetect.isSpammy(t)||this.core.events.sendEvent({type:"err",data:t},!0)};var Jt=function(){return(new Date).getTime()};if(Date.now&&(Jt=Date.now),window.performance&&performance.timing.navigationStart&&"function"==typeof performance.now&&p(performance.timing.navigationStart+performance.now(),Date.now(),2)){var Kt=performance.now.bind(performance);Jt=function(){return performance.timing.navigationStart+Kt()}}var Gt=Jt,$t=function(t){this.core=t};$t.prototype.newSpan=function(t){for(var e=[],n=arguments.length-1;n-- >0;)e[n]=arguments[n+1];var r=this._getTransaction();return r.isSpammy(t)?(o=r.exclusionTx).newSpan.apply(o,e):r.newSpan.apply(r,e);var o},$t.prototype.sendEvent=function(t,e){return e&&(t.ts=Gt()),this._getTransaction().send(t)},$t.prototype.sendWhenFresh=function(t){return this._getTransaction().sendWhenFresh(t)},$t.prototype._getTransaction=function(){return this.core.zoner.currentTransaction()};var Vt=/(%[0-9A-Z]{2})+/g,Qt=function(t){return{init:function(){var e=this.getUser(),n=E("plumbr_user_tracker");e?t.conf.tracking.user||(localStorage.removeItem("plmbr.usr.key"),e=null):(t.conf.tracking.cookie&&n&&(e=n),e||(e=j()),this.setUser(e)),N(e)&&(e=A(e),this.setUser(e)),t.conf.tracking.cookie?e!==n&&(k("plumbr_user_tracker",e),n=e):n&&I("plumbr_user_tracker"),null===this.getSession()&&this.setSession(_(4))},getSession:function(){return C("plmbr.session.key")},getUser:function(){return M("plmbr.usr.key")},setSession:function(e){t.conf.tracking.session&&U("plmbr.session.key",e)},setUser:function(e){t.conf.tracking.user&&R("plmbr.usr.key",e)}}},Yt=function(t){this._core=t},Zt={version:{}};Zt.version.get=function(){if(this._core)return this._core.version},Yt.prototype.setAppName=function(t){var e=this;return F("setAppName",function(){if("string"!=typeof t)throw new Error("App name must be a string");e._core.sendAPIInfo("app",t)})},Yt.prototype.setServiceName=function(t){var e=this;return F("setServiceName",function(){if("string"!=typeof t)throw new Error("Service must be a string");e._core.sendAPIInfo("service",t)})},Yt.prototype.setUserId=function(t){var e=this;return F("setUserId",function(){if("string"!=typeof t)throw new Error("User identity must be a string");e._core.sendAPIInfo("user",t)})},Yt.prototype.startTransaction=function(t){var e=this;return F("startTransaction",function(){if(!e._core.zoner.inActiveState()){var n=e._core.zoner.enterNewState(void 0,["API-state"]).leave;e._core.zoner.startNewTransaction({viaAPI:!0}),n()}t&&e.setServiceName(t)})},Yt.prototype.endTransaction=function(){return this.startTransaction("After an ended transaction")},Yt.prototype.identify=function(t){return console.warn("[PLUMBR] Use of PLUMBR.identify is deprecated. Use setUserId instead."),this.setUserId(t)},Object.defineProperties(Yt.prototype,Zt);var te=function(t){this.core=t},ee={unloadFriendly:{},canCheckBatches:{}},ne={supported:{}};ne.supported.get=function(){return!1},ee.unloadFriendly.get=function(){return!1},ee.canCheckBatches.get=function(){return!1},Object.defineProperties(te.prototype,ee),Object.defineProperties(te,ne);var re=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={unloadFriendly:{},url:{}},r={supported:{}};return r.supported.get=function(){return!!navigator.sendBeacon},n.unloadFriendly.get=function(){return!0},n.url.get=function(){return this.core.conf.serverUrl+"/api/browser/data/peekon?accountId="+encodeURIComponent(this.core.conf.accountId)},e.prototype.send=function(t,e,n,r){r(navigator.sendBeacon(this.url+"&batchId="+encodeURIComponent(t),e)?{success:null}:{success:!1,error:"no_beacon"})},Object.defineProperties(e.prototype,n),Object.defineProperties(e,r),e}(te),oe=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={unloadFriendly:{},url:{}},r={supported:{}};return r.supported.get=function(){return!!Image},n.unloadFriendly.get=function(){return!0},n.url.get=function(){return this.core.conf.serverUrl+"/api/browser/data/image?accountId="+encodeURIComponent(this.core.conf.accountId)},e.prototype.send=function(t,e,n,r){var o=new Image;o.src=this.url+"&payload="+encodeURIComponent(e)+"&batchId="+encodeURIComponent(t),o.addEventListener("load",function(){r({success:!0})}),o.addEventListener("error",function(){r({success:!1,error:"server"})})},Object.defineProperties(e.prototype,n),Object.defineProperties(e,r),e}(te),ie={beacon:re,image:oe,xhr:function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={url:{},canCheckBatches:{}},r={supported:{}};return r.supported.get=function(){return!!Ft},n.url.get=function(){return this.core.conf.serverUrl+"/api/browser/data/xhr?accountId="+encodeURIComponent(this.core.conf.accountId)},n.canCheckBatches.get=function(){return!0},e.prototype.send=function(t,e,n,r){var o=this,i=n.checkBatches,a=new Ft;a._pSelf=!0,zt.call(a,"POST",this.url),a.timeout=1e4,a.withCredentials=!0;try{this.core.conf.xhrSendJson?a.setRequestHeader("Content-Type","application/json; charset=UTF-8"):a.setRequestHeader("Content-type","text/plain"),a.setRequestHeader("X-Plumbr-BrowserBatchId",t),i&&a.setRequestHeader("X-Plumbr-BrowserCheckBatchIds",i.join("|"))}catch(t){}Ht.call(a,e),Ut.call(a,"error",function(){r({success:!1,error:"server"})}),Ut.call(a,"load",function(){if(a.status<300){var t={success:!0};if(i)try{var e=a.getResponseHeader("X-Plumbr-BrowserMissingBatchIds");t.missing=e?e.split("|"):[]}catch(e){o.core.console.error("Missing batches unavailable",e.message),t.missing=[]}r(t)}else r({success:!1,error:"server"})}),Ut.call(a,"timeout",function(){r({success:!1,error:"timeout"})})},Object.defineProperties(e.prototype,n),Object.defineProperties(e,r),e}(te)},ae=null,se=function(t){var e=this;this.core=t,this.inited=!1,this.senders={},this.senderOrder=[],this.batchNum=1,this.buffers={events:[],logs:[]},this.throttler=g(function(){try{e._sendData()}catch(t){}},this.core.conf.sendFreq,{leading:!1}),this.sending=[]};se.prototype.init=function(){var t=this;this.inited||(this.core.conf.senders.forEach(function(e){ie[e]&&ie[e].supported&&(t.senders[e]=new ie[e](t.core),t.senderOrder.push(e))}),this.inited=!0)},se.prototype.pullEventsForTx=function(t){if(s(this.buffers.events,function(e){return e.txId===t&&"tx"===e.type&&e.data.start})){var e=[];return this.buffers.events=this.buffers.events.filter(function(n){return n.txId!==t||(e.push(n),!1)}),e}return null},se.prototype.log=function(t){this._enqueue("logs",t)},se.prototype.event=function(t){this._enqueue("events",t)},se.prototype._enqueue=function(t,e){Array.isArray(e)||(e=[e]),this.buffers[t]=(this.buffers[t]||[]).concat(e),this.throttler()},se.prototype._getSender=function(t){var e=this;void 0===t&&(t=this.core.unloading);var n=null,r=s(this.senderOrder,function(r){var o=e.senders[r];return!t||(!!o.unloadFriendly||(n||(n=o),!1))});return r?this.senders[r]:n||null},se.prototype._hasDataToSend=function(){var t=this;return!!s(Object.keys(this.buffers),function(e){return t.buffers[e].length>0})},se.prototype._sendData=function(t,e){if(void 0===t&&(t=h),void 0===e&&(e=0),!this._hasDataToSend()||!navigator.onLine&&this.buffers.events.length<this.core.conf.maxBatchSize)return!1;try{var n=this._getSender();if(!n)return!1;var r=this._prepareBatch();if(this.sending.push(r),this.sending.length>10&&this.sending.splice(0,1),this._sendBatch(n,r,t),this.core.unloading&&this._hasDataToSend())if(e<5)this._sendData(void 0,e+1);else{if(5!==e)return!1;this.core.console.error(!0,"Couldn't send all in 5 batches while unloading"),this._sendData(void 0,e+1)}return r.id}catch(t){this.core.console.error("send error",D(t))}},se.prototype._prepareBatch=function(){var t=this,e=parseInt(C("plmbr.session.batch"),10)||1;e>(Number.MAX_SAFE_INTEGER||Math.pow(2,53)-1)&&(e=1),U("plmbr.session.batch",e+1);var n=j(),r={accountId:this.core.conf.accountId,i:this.batchNum++,si:e,id:n,_prev:ae,version:this.core.version};ae=n;var o=this.core.modules.session.getUser();o&&(r.usr=o);var i=this.core.modules.session.getSession();i&&(r.session=i);for(var a in t.buffers)if(t.buffers.hasOwnProperty(a)&&t.buffers[a].length)if("events"===a){var s=r[a]={};t.buffers[a].splice(0,Math.min(t.buffers[a].length,t.core.conf.maxBatchSize)).forEach(function(t){if(t.txId){t.txId in s||(s[t.txId]=[]);var e={};for(var n in t)t.hasOwnProperty(n)&&"txId"!==n&&(e[n]=t[n]);s[t.txId].push(e)}else this.core.console.error(!0,"Event without transaction ID",t)}),t.buffers[a].length&&t.core.console.info(!0,"More events leftover",t.buffers[a].length,t.core.unloading)}else r[a]=t.buffers[a].splice(0,Math.min(t.buffers[a].length,t.core.conf.maxBatchSize));r.events||(r.events={});var c=this.core.zoner.root.transaction.id;return c in r.events||(r.events[c]=[]),r.ts=Gt(),{id:n,payload:JSON.stringify(r),attempts:0,lastAttempt:null}},se.prototype._sendBatch=function(t,e,n){var r=this;if(void 0===n&&(n=h),e.attempts++,e.lastAttempt=Gt(),e.attempts>5)return b(this.sending,e),n(!1);var o={},i=null;t.canCheckBatches&&this.sending.length>1&&(i=this.sending.filter(function(t){return t!==e&&(!t.lastAttempt||t.lastAttempt<Gt()+5e3)})).length>0&&(o.checkBatches=i.map(function(t){return t.id}));var a='{"_attempt":'+e.attempts+","+e.payload.substr(1);t.send(e.id,a,o,function(o){var a=o.success,s=o.error,c=o.missing;if(void 0===c&&(c=[]),!0===a)return b(r.sending,e),n(!0),void(i&&i.length&&r.processMissingBatches(i,c));if(null!==a)if("no_beacon"!==s)e.lastAttempt=null,n(!1);else{b(r.senderOrder,"beacon");var u=r._getSender();u&&u!==t&&r._sendBatch(u,e,n)}else n(!0)})},se.prototype.processMissingBatches=function(t,e){var n=this;t.forEach(function(t){if(u(e,t.id)){if(t.lastAttempt&&t.lastAttempt>Gt()-5e3)return;return t.lastAttempt=Gt(),void Bt(function(){n._sendBatch(n._getSender(),t)},1)}b(n.sending,t)})};var ce=["ApplicationCache","EventSource","FileReader","InputMethodContext","MediaController","MessagePort","Node","Performance","SVGElementInstance","SharedWorker","TextTrack","TextTrackCue","TextTrackList","WebKitNamedFlow","Window","Worker","WorkerGlobalScope","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload","IDBRequest","IDBOpenDBRequest","IDBDatabase","IDBTransaction","IDBCursor","DBIndex","WebSocket"],ue="__plumbr_event_zone",le=["keydown","keypress","keyup"],de=["Delete","Del","Tab","Enter","Escape","Esc"," ","Spacebar","ArrowLeft","Left","ArrowUp","Up","ArrowRight","Right","ArrowDown","Down"],pe={ctrl:"ctrlKey",shift:"shiftKey",alt:"altKey",meta:"metaKey"},fe={capture:!0,passive:!0},he=function(t){function e(e){var r=J(e);if(!n[r]){var o=t.interaction.createState(["DOM#key",W.bind(null,e,t.core,Gt())],!0);n[r]=o}return n[r]}var n={};Ut.call(document,"keydown",function(t){var n=e(t);Object.defineProperty(t,ue,{value:n,enumerable:!1})},fe),Ut.call(document,"keypress",function(n){var r=e(n);Object.defineProperty(n,ue,{value:r,enumerable:!1}),t.interaction.registerInteraction(r)},fe),Ut.call(document,"keyup",function(t){var r=J(t),o=e(t);delete n[r],Object.defineProperty(t,ue,{value:o,enumerable:!1})},fe)},ve={click:{additions:$,registerInteraction:!0},mousedown:{additions:$,registerInteraction:!0},mouseup:{additions:$,registerInteraction:!0},submit:{additions:function(t,e,n){var r=t.target;r.getAttribute("method")&&(n.data.method=r.getAttribute("method")),r.getAttribute("action")&&(n.data.target=v(r.getAttribute("action")));var o=r.querySelector("input[type=submit],button[type=submit]");o&&(n.data.text=o instanceof HTMLInputElement?o.value:o.textContent)}},change:{additions:function(t,e,n){var r=t.target;r instanceof HTMLSelectElement&&(n.data.value=r.value)}},mouseenter:{linkInteraction:!1},mouseleave:{linkInteraction:!1},mouseover:{linkInteraction:!1},mouseout:{linkInteraction:!1},mousemove:{linkInteraction:!1},dragenter:{linkInteraction:!1},dragleave:{linkInteraction:!1},dragover:{linkInteraction:!1}},me={enumerable:!1,writable:!0},ge=function(t,e){void 0===t&&(t=null),void 0===e&&(e="Unknown"),this.parent=t,this.name=e,Object.defineProperties(this,{_transaction:me,_zoner:me})},ye={exclusionState:{},transaction:{},zoner:{}};ye.exclusionState.get=function(){return this},ye.transaction.get=function(){return this.parent?this.parent.transaction:this._transaction},ye.transaction.set=function(t){if(this.parent)return this.parent.transaction=t;this._transaction=t},ye.zoner.get=function(){return this._zoner?this._zoner:this.parent?this.parent.zoner:void 0},ye.zoner.set=function(t){this._zoner=t},ge.prototype.sendRelatedEvent=function(){},ge.prototype.logChain=function(){for(var t=[],e=this;e;)t.push(e),e=e.parent},ge.prototype.toJSON=function(){return{$type:"NState",name:this.name,transaction:this._transaction}},Object.defineProperties(ge.prototype,ye);var be=function(t,e){this.transaction=t,this.type=e,this.id=_(2),this.ended=!1};be.prototype.start=function(t){return t.start=Gt(),this.transaction.send({spanId:this.id,type:this.type,data:t})},be.prototype.end=function(t){this.ended=Gt(),t.end=this.ended;var e=this.transaction.send({spanId:this.id,type:this.type,data:t});return this.transaction.spanDone(this.id),e};var we=["asset","xhr"],_e=function(){this.stats={},this.used=[]};_e.prototype.end=function(){},_e.prototype.isSpammy=function(){return!1},_e.prototype.newSpan=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(be,[null].concat([this],t)))},_e.prototype.spanDone=function(){},_e.prototype.send=function(t){if(t.type&&u(we,t.type)&&t.data&&t.data.start&&t.data.url){var e=t.data.url;if(this.stats[e]?this.stats[e]++:(this.stats[e]=1,this.used.push(e)),this.used.length>25){var n=this.used.shift();this.stats["plumbr://overflow"]=(this.stats["plumbr://overflow"]?this.stats["plumbr://overflow"]:0)+this.stats[n],delete this.stats[n]}}return t},_e.prototype.event=function(){return this.send(event)},_e.prototype.sendTxStart=function(){},_e.prototype.toJSON=function(){return{id:"tx#excluded",stats:this.stats}};var Se=function(t){function e(e,n){void 0===e&&(e=null),void 0===n&&(n="Ignored"),t.call(this,null,n),this.nonexclusionParent=e}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={exclusionState:{},transaction:{}};return n.exclusionState.get=function(){return this},n.transaction.get=function(){return this.nonexclusionParent.transaction?this.nonexclusionParent.transaction.exclusionTx:(this._transaction||(this._transaction=new _e),this._transaction)},n.transaction.set=function(t){},e.prototype.toJSON=function(){return{$type:"XState",name:this.name,transaction:this._transaction}},Object.defineProperties(e.prototype,n),e}(ge),Ee=["load","error"],ke="onevent",Ie=function(t){function n(e,n,r){return"function"!=typeof e?e:t.core.wrapper.wrapUserCallback(e,{before:n,after:r})}var r=Q(t),o=Y(t);e(window,"setTimeout",function(e,i){var a;a="number"==typeof i[1]&&i[1]>=t.core.conf.ignoreTimeout?function(e,n,r){r.leave=t.enterState(t.current.exclusionState)}:r.bind(void 0,t.current),i[0]=n(i[0],a,o)}),e(window,"setInterval",function(e,r){r[0]=n(r[0],function(e,n,r){r.leave=t.enterState(t.current.exclusionState)},o)}),window.setImmediate&&e(window,"setImmediate",function(e,i){i[0]=n(i[0],r.bind(void 0,t.current),o)}),window.requestAnimationFrame&&e(window,"requestAnimationFrame",function(e,i){i[0]=n(i[0],r.bind(void 0,t.current),o)}),window.requestIdleCallback&&e(window,"requestIdleCallback",function(e,i){i[0]=n(i[0],r.bind(void 0,t.current),o)})},Oe=function(t){z(t),Z(t),tt(t),Ie(t)},Te=function(t){function e(e,n,r){void 0===e&&(e=null),void 0===n&&(n="Unknown"),t.call(this,e,n),Object.defineProperty(this,"_exclusionState",{enumerable:!1,writable:!0}),this.getEventData=r}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={exclusionState:{}};return n.exclusionState.get=function(){return this._exclusionState?this._exclusionState:(this._exclusionState=new Se(this),this._exclusionState)},e.prototype.sendRelatedEvent=function(){if(this.getEventData){var t=this.getEventData();t&&this.transaction.event(t),this.getEventData=null}},e.prototype.toJSON=function(){return{$type:"NState",name:this.name,transaction:this._transaction,parent:this.parent}},Object.defineProperties(e.prototype,n),e}(ge),xe=function(t){this.zoner=t,this.recentInteraction=null};xe.prototype.getEventState=function(t,e){if(t[ue])return t[ue];var n;if(this.zoner.core.conf.events[t.type]||e){var r=ve[t.type]||{},o=r.additions,i=r.linkInteraction;void 0===i&&(i=!0);var a=r.registerInteraction;void 0===a&&(a=!1);var s=Gt(),c=["DOM#"+t.type,K.bind(void 0,t,this.zoner.core,s,o)];n=this.createState(c,e||i),a&&this.registerInteraction(n)}return null===this.zoner.core.conf.events[t.type]&&(n=this.zoner.current.exclusionState),n?(Object.defineProperty(t,ue,{value:n,enumerable:!1}),n):void 0},xe.prototype.createState=function(t,e){return!0===e&&(e=this.recentInteraction),this.zoner.createState(Te,t,e)},xe.prototype.registerInteraction=function(t){var e=this;this.intTimeout&&clearTimeout(this.intTimeout),this.recentInteraction=t,this.intTimeout=Bt(function(){e.recentInteraction===t&&(e.recentInteraction=null)},10)};var Pe=["mousedown","mouseup","click"],Le={capture:!0,passive:!0},Ne=function(t){Pe.forEach(function(e){Ut.call(document,e,function(e){t.interaction.getEventState(e)},Le)})},Ae=document.location.href,je=["BUTTON","LABEL","A","SPAN","TD","TH"],Me=["I"],Ce=["BUTTON","INPUT","METER","SELECT","TEXTAREA"],Re=["button","radio","submit"],Ue=6,De=512,Be=["tx","domevent","nav","api","stale","hidden"],Fe=500,ze=function(t,e,n){var r=this;void 0===e&&(e={}),this.core=t,this.id=_(4),this.extraData=e,this.previousId=n,this.started=!1,this.ended=!1,this.last=0,this.queue=[],this.exclusionTx=new _e,this.spans={},this.pingInterval=null,this.toSendFresh={},this.storedForFresh=!1,this.spamDetector=new qt(5,1/0,{getMeta:Gt,metaChecker:lt,onSpam:function(t){r._sendEvent({type:"polling",ts:Gt(),data:{url:t}})}})},He={isStale:{}};He.isStale.get=function(){return this.last&&this.last+15e3<Gt()},ze.prototype.end=function(t){if(this.started&&!this.ended){var e={type:"tx",data:{end:Gt()}};t&&(e.data.leaving=!0),this.exclusionTx.used.length>0&&(e.data.exclusions=this.exclusionTx.stats),this._sendEvent(e),this.ended=!0,null!==this.pingInterval&&clearInterval(this.pingInterval),this.spamDetector.destroy()}},ze.prototype.isSpammy=function(t){return this.spamDetector.isSpammy(t)},ze.prototype.newSpan=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n=new(Function.prototype.bind.apply(be,[null].concat([this],t)));return this.spans[n.id]=n,n},ze.prototype.spanDone=function(t){delete this.spans[t]},ze.prototype.sendHeartbeat=function(){if(this.started)if(this.ended)clearInterval(this.pingInterval);else{var t=Object.keys(this.spans);t.length&&this.event({type:"ping",ts:Gt(),data:{ongoing:t}})}},ze.prototype.send=function(t){var e=this,n=Gt();if(!(this.started&&n-this.started>864e5)){if(this.started||this.sendTxStart(),ut(t)&&this.isStale){var r=new Error("Stale").stack||"unavailable";this._sendEvent({type:"stale",ts:Gt(),data:{last:this.last,stack:r}})}return this.storedForFresh&&(Object.keys(this.toSendFresh).forEach(function(t){e._sendEvent(e.toSendFresh[t])}),this.toSendFresh={},this.storedForFresh=!1),this.last=Gt(),this._sendEvent(t)}this.ended=!0},ze.prototype.sendWhenFresh=function(t){return this.isStale?(this.toSendFresh[t.type]=t,void(this.storedForFresh=!0)):this.send(t)},ze.prototype.event=function(t){return this.send(t)},ze.prototype._sendEvent=function(t){var e=this;return(t=a({txId:this.id},t)).data&&t.data.element&&(a(t.data,st(t.data.element)),t.data.prettyPath=ot(t.data.element),delete t.data.element),!this.core.conf.navOnly&&this.queue&&u(Be,t.type)?(this.queue.push(t),t):(this.queue&&(this.queue.splice(0,this.queue.length).forEach(function(t){e.core.send.event(t)}),this.queue=!1),this.core.send.event(t),t)},ze.prototype.sendTxStart=function(){var t=Gt();this.started=t;var e={pl:!1,start:t,url:window.location.href,ss:nt()};this.previousId&&(e.prevId=this.previousId),a(e,this.extraData),this._sendEvent({type:"tx",data:e}),this.pingInterval=Dt(this.sendHeartbeat.bind(this),this.core.conf.pingFreq)},ze.prototype.toJSON=function(){return{id:this.id,extraData:this.extraData,started:this.started,ended:this.ended}},Object.defineProperties(ze.prototype,He);var qe="plmbr.tx.previous",Xe=function(t){var e=Q(t),n=Y(t);return{before:o(function(n,r,o,i,a){var s=o[0];if(s&&s.type){var c=t.interaction.getEventState(s);if(c)i.leave=t.enterState(c);else if(n&&(r||(r=window),r[ue]&&a[jt])){var u=n+"_"+s.type+"_"+a[jt],l=r[ue][u];l&&e(l,r,o,i)}}}),after:o(function(t,e,r){n(t,e,r)})}},We=function(t){this.core=t,this.domeventWrappers=Xe(this);var e=new Te(null,"pl");e.transaction=this.continueOrStartTx({pl:!0}),this.root=e,this.current=e,this.stack=[],this.unloadState=null,this.interaction=new xe(this),this.navCheck=function(){}};We.prototype.continueOrStartTx=function(t){var e=this,n=dt(this.core),r=this.startNewTransaction(t);return n&&(r.id=n.txId,r.started=Gt(),n.events&&n.events.forEach(function(t){return e.core.send.event(t)})),r},We.prototype.createState=function(t,e,n){return void 0===t&&(t=Te),void 0===n&&(n=this.current!==this.root?this.current:null),new(Function.prototype.bind.apply(t,[null].concat([n],e)))},We.prototype.currentTransaction=function(){return this.current.transaction||(this.current.transaction=this.startNewTransaction(),ht(this.current)),this.current.getEventData&&ht(this.current,!0),this.current.transaction},We.prototype.enterNewState=function(t,e,n){var r=this.createState(t,e,n);return{state:r,leave:this.enterState(r)}},We.prototype.enterState=function(t){this.navCheck(),this.core.gatherers.assets.processSync&&this.core.gatherers.assets.processSync();this.current;return this.stack.push(t),this.current=t,ft(0,0,0,this.stack),this.leaveState.bind(this,t)},We.prototype.forwardCurrentTx=function(t,e){var n=this.core.send.pullEventsForTx(t.id);pt(this.core,t,e,n),t.ended=!0},We.prototype.inActiveState=function(){return this.stack.length>0},We.prototype.leaveState=function(t){var e=this.stack.indexOf(t);if(-1!==e){if(this.navCheck(),this.core.gatherers.assets.processSync&&this.core.gatherers.assets.processSync(),this.stack.splice(e,1),e===this.stack.length||this.current===t){var n;n=this.stack.length?this.stack[this.stack.length-1]:this.current=this.root,this.current=n}ft(0,0,this.current,this.stack)}},We.prototype.startNewTransaction=function(t){var e=this,n=void 0;this.root&&this.root.transaction&&(n=this.root.transaction.id,this.root.transaction.end());var r=new ze(this.core,t,n);this.root=this.createState(Te,["SOFTTX"],null),this.root.transaction=r;var o=Object.keys(this.core.persistentAPI);if(o.length){var i={};o.forEach(function(t){i[t]=e.core.persistentAPI[t]}),r.send({type:"api",ts:Gt(),data:i})}return this.core.hasUnzoned&&r.send({type:"unzoned"}),r};var Je=null,Ke=function(t){return Je||(Je=new We(t),Ne(Je),he(Je),Je.navCheck=rt(Je),Oe(Je)),Je},Ge=function(t){var e=this;this.core=t,this.onUserError=function(t,n,r,o){e.core.errors.processError(o,null,{source:"callback"})}};Ge.prototype.wrapUserCallback=function(e,n){return t(e,n.before,n.after,this.onUserError)},Ge.prototype.wrapReusableUserCallback=function(t,e,r){return r.onerror=this.onUserError,n(t,e,r)};var $e=864e5,Ve={startTime:"st",navigationStart:"ns",unloadEventStart:"ues",unloadEventEnd:"uee",redirectStart:"rs",redirectEnd:"re",fetchStart:"fs",domainLookupStart:"dls",domainLookupEnd:"dle",connectStart:"cs",connectEnd:"ce",secureConnectionStart:"scs",requestStart:"reqs",responseStart:"ress",responseEnd:"rese",domLoading:{key:"dl",renderTime:!0},domInteractive:{key:"di",renderTime:!0},domContentLoadedEventStart:{key:"dcles",renderTime:!0},domContentLoadedEventEnd:{key:"dclee",renderTime:!0},domComplete:{key:"dc",renderTime:!0},loadEventStart:{key:"les",renderTime:!0},loadEventEnd:{key:"lee",renderTime:!0},duration:{key:"dur",timestamp:!1},transferSize:{key:"ts",timestamp:!1},encodedBodySize:{key:"ebs",timestamp:!1},decodedBodySize:{key:"dbs",timestamp:!1},nextHopProtocol:{key:"nhp",include:!0}},Qe=Boolean(window.performance&&window.performance.getEntriesByName),Ye=2e3,Ze=[];Qe&&performance.addEventListener?Ut.call(performance,"resourcetimingbufferfull",_t):performance.onresourcetimingbufferfull=_t;var tn=["","json","text"],en=function(t){e(window.XMLHttpRequest.prototype,"open",function(e,n){if("fetch"!==t.zoner.current.name){var r,o=n[0],i=v(n[1]);if("http"===i.substr(0,4)&&!m(i,t.conf)){var a=t.events.newSpan(i,"xhr");Object.defineProperty(e,"__plmbr_span",{value:a,enumerable:!1}),Object.defineProperty(e,"__plmbr_span_start",{value:function(){var t={m:o,url:i},e=a.start(t);r=e.data.start},configurable:!0,enumerable:!1});var s=!1;Ut.call(e,"readystatechange",function(){if(e.readyState===XMLHttpRequest.DONE&&!s){s=!0;var t={responseCode:e.status};try{var n="\n"+e.getAllResponseHeaders();if(u(n,"\n"+"X-Plumbr-TransactionId".toLowerCase()+": ")||u(n,"\nX-Plumbr-TransactionId: ")){var o=e.getResponseHeader("X-Plumbr-TransactionId");null!==o&&(t.bTxId=o)}}catch(t){}bt(St(i,{start:r,end:Gt()}),t),e.status>=400&&tn.indexOf(e.responseType)>-1&&e.responseText.length<8192&&(t.errorResponse=e.responseText),a.end(t)}})}}}),e(window.XMLHttpRequest.prototype,"send",function(t){t.__plmbr_span&&t.__plmbr_span_start&&(t.__plmbr_span_start(),delete t.__plmbr_span_start)})},nn=function(t){window.fetch&&e(window,"fetch",function(e,n,r){var o=t.zoner.enterNewState(Te,"fetch").leave;r.leave=o},function(e,n,r,o){r.leave();var i,a;n[0]instanceof window.Request?(i=n[0].method,a=n[0].url):(i="GET",a=v(n[0])),"object"==typeof n[1]&&n[1].method&&(i=n[1].method);var s=t.events.newSpan(a,"xhr"),c=s.start({fetch:!0,m:i,url:a}).data.start;o.then(function(t){var e={responseCode:(t=t.clone()).status};t.headers.has("X-Plumbr-TransactionId")&&(e.bTxId=t.headers.get("X-Plumbr-TransactionId")),bt(St(a,{start:c,end:Gt()}),e),t.status>=400?t.text().then(function(t){t.length<8192&&(e.errorResponse=t),s.end(e)},function(){s.end(e)}):s.end(e)},function(t){s.end({responseCode:0,errorResponse:t.message})})})},rn=["HTML","HEAD","BODY"],on={IFRAME:{attr:"src",matches:function(t){return t.src&&"about:blank"!==t.src}},IMG:{attr:"src"},LINK:{attr:"href",matches:function(t){return"stylesheet"===t.rel},critical:function(t){return!t.media||"all"===t.media||!!window.matchMedia&&window.matchMedia(t.media).matches}},SCRIPT:{attr:"src",matches:function(t){return!!t.src},critical:function(t){if(t.defer||t.async)return!1;for(var e=t,n=e.parentNode,r=0;!u(rn,n.tagName.toUpperCase())&&r++<128;)if(e=n,!(n=e.parentNode))return!0;if(n instanceof HTMLBodyElement){for(var o=e.previousElementSibling,i=0;o&&i++<128;){if(!(o instanceof HTMLScriptElement))return!1;o=o.previousElementSibling}return!0}return!0}}},an=function(t){var e=this;this.assets=t,this.core=t.core,this.observer=null,this.inProgressScripts=[],this.pageStable=!1,Ut.call(document,"load",function(t){t.target&&e.handleLoadEvent(t.target)},{capture:!0}),Ut.call(document,"error",function(t){t.target&&e.handleErrorEvent(t.target)},{capture:!0}),this.monitor(),this.gatherAlreadyOnPage()};an.prototype.monitor=function(){if(window.MutationObserver){var t=new MutationObserver(o(this._processMutations.bind(this)));t.observe(document,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["src","href"]}),this.observer=t}},an.prototype.gatherAlreadyOnPage=function(){var t=this;c(document.querySelectorAll("link[rel=stylesheet],script[src],img[src],iframe[src]"),function(e){var n=Et(e);n&&t._trackNode(e,n,!0)}),"loading"===document.readyState?Ut.call(document,"readystatechange",function(){"interactive"===document.readyState&&t._insertScriptFinishDetection()}):setTimeout(this._insertScriptFinishDetection.bind(this),1)},an.prototype._insertScriptFinishDetection=function(){var t=this,e="__plmbr"+_(1).substr(1),n=document.createElement("script");window[e]=function(){delete window[e],document.body.removeChild(n),t.inProgressScripts.splice(0,t.inProgressScripts.length).forEach(function(e){return t.handleLoadEvent(e,!0)}),t.pageStable=!0},n.innerHTML=e+"()",document.body.appendChild(n)},an.prototype.processSync=function(){this.observer&&this.observer.takeRecords&&this._processMutations(this.observer.takeRecords())},an.prototype._processMutations=function(t){var e=this;t.forEach(function(t){if("childList"===t.type)c(t.addedNodes,e._scanAddedNodes.bind(e)),c(t.removedNodes,e._scanRemovedNodes.bind(e));else if("attributes"===t.type){var n=t.target,r=n.tagName.toUpperCase(),o=on[r];if(!o||o.attr!==t.attributeName)return;e._trackNode(n,o)}})},an.prototype._scanAddedNodes=function(t){if(t instanceof Element){var e=Et(t);e&&this._trackNode(t,e),this.core.conf.inlineEvents&&this.core.fixInlineEvents(t),t.children&&t.children.length&&c(t.children,this._scanAddedNodes.bind(this))}},an.prototype._scanRemovedNodes=function(t){t.__plmbr_asset&&this._untrackNode(t),t.children&&t.children.length&&c(t.children,this._scanAddedNodes.bind(this))},an.prototype._trackNode=function(t,e,n){var r=this;if(e){var o=t[e.attr];if(t.__plmbr_asset){if(t.__plmbr_asset.url===o)return;t.__plmbr_asset.removeNode(t),delete t.__plmbr_asset}if(t.__plmbr_lasturl!==o&&"http"===o.substr(0,4)&&!m(o,this.core.conf)){var i=t instanceof HTMLIFrameElement,a={type:t.tagName};e.critical&&e.critical(t)&&(a.crit=!0);var s=this.assets.register(o,a,this.pageStable,i);s.addNode(t),Object.defineProperty(t,"__plmbr_asset",{configurable:!0,value:s}),Object.defineProperty(t,"__plmbr_lasturl",{configurable:!0,value:o}),n&&t instanceof HTMLScriptElement&&this.inProgressScripts.push(t),kt(t,o,this.pageStable)&&setTimeout(function(){r.handleLoadEvent(t)},250)}}},an.prototype._untrackNode=function(t){t.__plmbr_asset&&(t.__plmbr_asset.removeNode(t),delete t.__plmbr_asset)},an.prototype.handleLoadEvent=function(t,e){if(t&&t.__plmbr_asset){var n=t.__plmbr_asset,r={success:!0};t.currentSrc&&t.currentSrc!==n.url&&(n.backupUrl=t.currentSrc);try{t.sheet&&t.sheet.cssRules&&0===t.sheet.cssRules.length&&(r.success=!1)}catch(t){}n.loaded(r,e||!this.pageStable),delete t.__plmbr_asset}},an.prototype.handleErrorEvent=function(t){if(t&&t.__plmbr_asset){var e=t.__plmbr_asset;e&&(e.loaded({success:!1}),delete t.__plmbr_asset)}};var sn=function(t){this.assets=t,this.observer=null;try{window.PerformanceObserver&&(this.observer=new PerformanceObserver(this._processEvents.bind(this)),this.observer.observe({entryTypes:["resource"]}))}catch(t){}};sn.prototype._processEvents=function(t){var e=this;t.getEntries().forEach(function(t){var n=t.name;if(!d(n,e.assets.core.conf.serverUrl)&&"xmlhttprequest"!==t.initiatorType){if(n in e.assets.inProgress){var r=e.assets.inProgress[n];return r.ended&&!r.rt?void r.span.transaction.event({type:"log",ts:Gt(),data:{level:"warning",data:["late RT (obs)",r.span.id]}}):void(r.rt=t)}"iframe"!==t.initiatorType&&"img"!==t.initiatorType&&"function"==typeof t.toJSON&&e.assets.core.console.info("RT no asset",t.toJSON())}})};var cn=function(t){this.core=t,this.inProgress={},this.mutationObs=new an(this),this.performanceObs=new sn(this)};cn.prototype.processSync=function(){this.mutationObs.processSync()},cn.prototype.register=function(t,e,n,r){var o=this.inProgress[t];return r||!o||o.ended?(o=new un(this,t,n),r||(this.inProgress[t]=o),o.span.start(a({url:t},e)),o):o},cn.prototype.cleanupAsset=function(t){this.inProgress[t.url]===t&&delete this.inProgress[t.url]};var un=function(t,e,n){this.gatherer=t,this.url=e,this.backupUrl=void 0,this.start=Gt(),this.stable=n,this.span=this.gatherer.core.events.newSpan(e,"asset"),this.nodes=[],this.ended=!1};un.prototype.addNode=function(t){this.nodes.push(t)},un.prototype.removeNode=function(t){var e=this.nodes.indexOf(t);e>-1&&this.nodes.splice(e,1),0===this.nodes.length&&this.loaded({abandoned:!0,success:!1})},un.prototype.loaded=function(t,e){var n=this;if(!this.ended){var r=a({count:this.nodes.length},t),o={};this.stable&&(o.start=this.start),e||(o.end=Gt()),this.rt||(this.rt=St(this.url,o)),!this.rt&&this.backupUrl&&(this.rt=St(this.backupUrl,o)),bt(this.rt,r),this.span.end(r),this.ended=!0,Bt(function(){n.gatherer.cleanupAsset(n)},1e3)}};var ln=function(t){this.core=t,this.lastKnownLeavingInteraction=null,this.unloading=null,this.bindEvents()};ln.prototype.bindEvents=function(){var t=this.handleEvent.bind(this);Ut.call(window,"click",t,{capture:!0}),Ut.call(window,"submit",t,{capture:!0}),Ut.call(window,"beforeunload",this.handleBeforeUnload.bind(this),{capture:!0}),Ut.call(window,"unload",this.handleUnload.bind(this),{capture:!0})},ln.prototype.handleEvent=function(t){var e=this,n=It(t);if(n){var r=this.core.zoner.interaction.getEventState(t),o={cancelled:!1,hardnavable:Ot(t,n),state:r};this.lastKnownLeavingInteraction=o,Bt(function(){if(t.defaultPrevented)return o.cancelled=!0,void(e.lastKnownLeavingInteraction=null);Bt(function(){e.lastKnownLeavingInteraction===o&&(e.lastKnownLeavingInteraction=null)},100)},0)}},ln.prototype.handleBeforeUnload=function(t){var e=this,n=Gt(),r={interaction:this.lastKnownLeavingInteraction,time:n};this.unloading=r,this.lastKnownLeavingInteraction=null;var o=this.core.zoner.interaction.getEventState(t,r.interaction?r.interaction.state:void 0);r.state=o,Bt(function(){if(r.interaction&&r.interaction.cancelled&&(r.interaction=null,o.transaction&&e.core.console.warn("Wrong interaction in beforeunload tx",o.transaction.id)),t.returnValue||t.defaultPrevented){var n=e.unloading;Bt(function(){e.unloading===n&&(e.unloading=null)},5e3)}},0)},ln.prototype.handleUnload=function(){this.core.unloading=!0,this.core.gatherers.pageLoad.onUnload();var t,e,n,r,o,i={};if(this.unloading&&this.unloading.interaction&&(o=this.unloading.interaction),this.lastKnownLeavingInteraction&&(o=this.lastKnownLeavingInteraction),o&&o.hardnavable&&(r=o.state),r&&(e=this.core.zoner.enterState(r),n=!0),!n&&document.querySelector){var a=document.querySelector("meta[http-equiv=refresh]");if(a){var s=a.getAttribute("content").split(";url=");(1===s.length||f(s[1]))&&(n=!0,i.redir=!0)}}if(n){var c=this.unloading?this.unloading.time:Gt();this.core.events.sendEvent({type:"hardnav",ts:c,data:i}),t=this.core.zoner.currentTransaction(),this.core.zoner.forwardCurrentTx(t,c)}e&&e(),this.core.zoner.root.transaction&&this.core.zoner.root.transaction!==t&&this.core.zoner.root.transaction.end(!0),this.core.send._sendData()};var dn=function(t){var e=navigator.onLine?null:-1;Ut.call(window,"offline",function(){e=Gt()}),Ut.call(window,"online",function(){if(null!==e){var n={type:"offline",data:{end:Gt(),since:e}};t.send._hasDataToSend()?t.events.sendEvent(n):t.events.sendWhenFresh(n)}})},pn=function(t){function e(e){void 0===e&&(e={}),c||(gt(e),i&&(e.bTxId=i),t.conf.responseCode&&(e.responseCode=parseInt(t.conf.responseCode,10)),window.performance&&performance.navigation&&(e.navty=performance.navigation.type,performance.navigation.redirectCount>0&&(e.redir=performance.navigation.redirectCount)),o.end(e),c=!0)}function n(){var t=yt(u),e=Object.keys(t);0!==e.length&&(u=u.concat(e),o.transaction.send({spanId:o.id,type:"render",data:t}))}function r(){switch(document.readyState){case"complete":case"interactive":e(),setTimeout(n,1);break;default:var t=window.performance.timing;t&&t.responseEnd>0&&e()}}var o=t.events.newSpan(null,"pl");o.start({url:window.location.href});var i,a=S("plumbr-tx-"),s=0;Object.keys(a).forEach(function(t){var e=parseInt(t.substr("plumbr-tx-".length),10);e>s&&(i=a[t],s=e)}),i&&I("plumbr-tx-"+s),Object.keys(a).length>1&&t.console.warn("multiple btx cookies",a,s);var c=!1,u=[];return Ut.call(document,"readystatechange",r,{capture:!0}),Ut.call(document,"load",function(){setTimeout(n,1)},{capture:!0}),r(),{onUnload:function(){c||"complete"===document.readyState||e({unload:!0})}}},fn=function(t,e){function n(){var n=Gt();e.hardnav.unloading||e.hardnav.lastKnownLeavingState||(t.events.sendWhenFresh({type:"hidden",data:{start:n,state:document.visibilityState}}),t.send._sendData()),o=!0,i=n}function r(){t.events.sendWhenFresh({type:"hidden",data:{end:Gt(),since:i}}),o=!1,i=null}var o=document.hidden,i=document.hidden?-1:null;Ut.call(document,"visibilitychange",function(){if(document.hidden!==o)return document.hidden?n():void r()}),o&&t.events.sendWhenFresh({type:"hidden",data:{start:-1,state:document.visibilityState}})},hn=function(t){var e={};return nn(t),e.pageLoad=pn(t),e.assets=new cn(t),e.hardnav=new ln(t),en(t),fn(t,e),dn(t),e},vn={appName:"setAppName",serviceName:"setServiceName",userId:"setUserId"},mn=["app","user"],gn=function(t){var e=this;this.publicAPI=new Yt(this),this.conf=Tt(t),this.persistentAPI={},this.version="2.3.26 build 1508834402560",this.unloading=!1,this.wrapper=new Ge(this),this.console=B(this),this.send=new se(this),this.modules={session:Qt(this)},this.send.init(),this.modules.session.init(),this.events=new $t(this),i(function(t){e.console.error("wrapped func error",D(t))}),this.zoner=Ke(this),this.gatherers=hn(this),this.errors=new Wt(this),this.hasUnzoned=!1,this.console.init(),this.console.info("RUM version",this.version),this.console.info("userAgent",navigator.userAgent),this.conf.inlineEvents&&this.setupInHTMLMonitoring(),this.applyConfToTx()};gn.prototype.applyConfToTx=function(){var t=this;Object.keys(vn).forEach(function(e){void 0!==t.conf[e]&&t.publicAPI[vn[e]](t.conf[e])})},gn.prototype.sendAPIInfo=function(t,e){u(mn,t)&&(this.persistentAPI[t]=e);var n={};n[t]=e,this.events.sendEvent({type:"api",data:n},!0)},gn.prototype.setupInHTMLMonitoring=function(){var e=this;window.instrumented_with_plumbr=function(n){return t(n,e.zoner.domeventWrappers.before.bind(void 0,void 0),e.zoner.domeventWrappers.after)},Array.isArray(this.conf.inlineEvents)||(this.conf.inlineEvents=G(this));var n=this.conf.inlineEvents.map(function(t){return"[on"+t+"]"}).join(",");c(document.querySelectorAll(n),this.fixInlineEvents.bind(this))},gn.prototype.fixInlineEvents=function(t){var e=this.conf.inlineEvents;c(t.attributes,function(n){if("on"===n.name.substr(0,2)&&u(e,n.name.substr(2))){if("onerror"===n.name&&"BODY"===t.nodeName)return;var r=n.value;if(-1!==r.indexOf("return (instrumented_with_plumbr("))return;n.value="return (instrumented_with_plumbr(function(event){"+r+"})).apply(this, arguments)"}})};var yn=new RegExp("bot|crawl|spider|borg|yahoo|slurp|archiver|netresearch|lycos|scooter|altavista|teoma|oegp|charlotte|http client|htdig|ichiro|mogimogi|larbin|pompos|scrubby|searchsight|semanticdiscovery|snappy|speedy|voila|vortex|voyager|zao|zeal|dataparksearch|findlinks|yottaamonitor|browsermob|httpmonitor|bingpreview|pagepeeker|webthumb|url2png|zooshot|gomeza|google sketchup|read later|pingdom|facebook|rackspace|scan|link|ezine|preview|dig|tarantula|urllib|jakarta|wget|rget|monitor|libwww|moozilla|seer|spice|snoopy|feedfetcher|google wireless transcoder|curl|wordpress|java|netfront|archive|xenu|feed|appmanager|covario|perl|host|lwp|page speed|ptst|digext|nutch|sleuth|yottaamonitor","i"),bn=function(t){return yn.test(t)},wn=["Array","Date","Hash","Number","Object","String"],_n={bind:function(){try{if(!xt(Function.prototype.bind))return console.error("[Plumbr] Broken Function#bind polyfill detcted, please move agent before other libraries (such as prototypejs)."),!1}catch(t){return console.error("[Plumbr] Internal error, please poke support",t),!1}var t,e=Function.prototype.bind;return Object.defineProperty(Function.prototype,"bind",{configurable:!0,get:function(){return void 0!==t?t:e},set:function(e){if(this===Function.prototype)try{xt(e)&&(t=e)}catch(t){}else Object.defineProperty(this,"bind",{configurable:!0,value:e,writable:!0})}}),!0},json:function(){function t(t){var e=t.prototype;Object.defineProperty(e,"_toJSON",{configurable:!0,enumerable:!1,value:e.toJSON,writable:!0}),Object.defineProperty(t.prototype,"toJSON",{get:function(){if(!n)return this._toJSON},set:function(t){this._toJSON=t}})}var n=!1;return e(JSON,"stringify",function(){n=!0},function(){n=!1}),wn.forEach(function(e){window[e]&&t(window[e])}),!0}},Sn=function(t){var e=!0;return t.forEach(function(t){t in _n&&(e=_n[t]()&&e)}),e};!function(){if(window.PLUMBR)console.error("[Plumbr] Multiple loadings of Plumbr browser agent attempted");else if(Pt()){var t=document.querySelector("script[data-plumbr]"),e={};if(t&&t.getAttribute("data-plumbr"))try{e=JSON.parse(t.getAttribute("data-plumbr"))}catch(t){return void console.error("[Plumbr] Error parsing Plumbr config, no data will be sent.",t)}if(void 0===e.compat&&(e.compat=["bind"]),!e.compat||Sn(e.compat)){if(!(e.cancelInFrame&&y()||navigator.userAgent&&bn(navigator.userAgent)))if(e.accountId)if(e.serverUrl){try{var n=new gn(e)}catch(t){console.error("[Plumbr] Internal error, please alert support",t)}window.PLUMBR=n.publicAPI;var r=[];c(document.getElementsByTagName("script"),function(t){t.hasAttribute("data-plumbr")||t.defer||!t.src||0!==t.src.indexOf("http")||r.push(t.src)}),r.length>0&&(n.events.sendEvent({type:"unzoned",data:{files:r}}),n.hasUnzoned=!0)}else console.error("[Plumbr] Missing plumbr server endpoint, no data will be sent.");else console.error("[Plumbr] Missing plumbr account ID, no data will be sent.")}else console.error("[Plumbr] Problems running compatiblity scripts, please check above.")}}()}();
//# sourceMappingURL=pa.js.map
